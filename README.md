
# Compile and Install of the GTKWave Tool

This repository contains a **make** file for easy compile and install of [GTKWave](http://gtkwave.sourceforge.net).
GTKWave is a waveform viewer for LXT, LXT2, VZT, FST, GHW, VCD and EVCD files that are typically generated by digital 
simulation tools such as:
[Icarus Verilog](http://iverilog.icarus.com), 
[ModelSim](https://www.mentor.com/products/fv/modelsim), 
[Xilinx ISim](https://www.xilinx.com/products/design-tools/isim.html), 
[Xilinx XSim](https://www.xilinx.com/products/design-tools/vivado/simulator.html) etc.

This **make** file can build the GTKWave tool on the following systems:
* Linux
* Windows
    * [MSYS2](https://www.msys2.org)/mingw64
    * [MSYS2](https://www.msys2.org)/mingw32
    * **FIXME**: [Cygwin](https://www.cygwin.com)

# Get Source Code

## ed_gtkwave

```bash
git clone https://github.com/embed-dsp/ed_gtkwave.git
```

## GTKWave

```bash
# Enter the ed_gtkwave directory.
cd ed_gtkwave

# Edit the Makefile for selecting the GTKWave source version.
vim Makefile
PACKAGE_VERSION = 3.3.95
```

```bash
# Download GTKWave source package into src/ directory.
make download
```


# Build

```bash
# Unpack source code into build/ directory.
make prepare
```

FIXME: It is recomended to type `make clean` before running configuration a second time to ensure that all object files will be rebuilt.
```bash
# Configure source code.
make configure

# Configure source code for 32-bit compile on a 64-bit system.
# FIXME: This fails on Fedora-28 64-bit
make configure M=32
```

```bash
# Compile source code using 4 simultaneous jobs (Default).
make compile

# Compile source code using 2 simultaneous jobs.
make compile J=2
```


# Install

```bash
# Install build products.
# FIXME: linux, arm, ...
sudo make install

# Install build products.
# FIXME: mingw32, mingw64, ...
make install
```

The GTKWave package installs correctly according to the
[GNU Coding Standards](https://www.gnu.org/prep/standards/standards.html).
The build products are installed in the following locations:

FIXME: linux, arm, ...
```bash
opt/
└── gtkwave/
    └── gtkwave-3.3.95/     # prefix:
        ├── linux_x86_64/   # exec_prefix: 64-bit binaries and libraries for Linux
        │   └── bin/        # bindir:
        │       ├── gtkwave
        │       ...
        ├── linux_x86/      # exec_prefix: 32-bit binaries and libraries for Linux
        │   └── bin/        # bindir:
        │       ├── gtkwave
        │       ...
        └── share/          # datadir: Architecture independent data files.
            ...
```

FIXME: windows 64-bit, mingw32, mingw64
```bash
/c/opt/
└── gtkwave/
    └── gtkwave-3.3.95/     # prefix:
        ├── mingw64_x86_64/ # exec_prefix: 64-bit binaries and libraries for MSYS2/mingw64 on a 64-bit Windows
        │   └── bin/        # bindir:
        │       ├── gtkwave
        │       ...
        ├── mingw32_x86_64/ # exec_prefix: 32-bit binaries and libraries for MSYS2/mingw32 on a 64-bit Windows
        │   └── bin/        # bindir:
        │       ├── gtkwave
        │       ...
        └── share/          # datadir: Architecture independent data files.
            ...
```


# Tested System Configurations

System  | M=                | M=32  
--------|-------------------|-------------------
linux   | Fedora-28 64-bit  | **FIXME**
mingw64 | Windows-10 64-bit |
mingw32 | Windows-10 64-bit |
cygwin  | **FIXME**         |

This has been testes with the following Linux distributions and compilers:
* `Fedora-27 (64-bit)`
    * `gcc-7.2.1`
    * `gcc-7.3.1`
* `Fedora-28 (64-bit)`
    * `gcc-8.1.1`


# Prerequisites

## Fedora-27 64-bit | Fedora-28 64-bit
FIXME: Refer to the Fedora guides.

```bash
dnf install gcc-c++

dnf install zlib
dnf install zlib-devel

dnf install bzip2
dnf install bzip2-devel

dnf install xz
dnf install xz-devel

dnf install tcl
dnf install tcl-devel

dnf install tk
dnf install tk-devel

dnf install gtk2
dnf install gtk2-devel
```

## MSYS2
FIXME: Refer to the MSYS2 guides.

```
FIXME: gperf, flex, bison
FIXME: tcl, tk
FIXME: xlib, bzlib, xz

```

## Cygwin
FIXME: Refer to the Cygwin guides.

```
zlib
libbz2
tcl-devel
tcl-tk-devel
```
